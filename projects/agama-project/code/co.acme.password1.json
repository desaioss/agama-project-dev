{
  "nodes": [
    {
      "id": "startNode-171106c7-e30e-405e-a2c4-12a26bc42ac5",
      "type": "startNode",
      "sourcePosition": "right",
      "position": {
        "x": 30,
        "y": 30
      },
      "deletable": false,
      "data": {
        "id": "startNode-171106c7-e30e-405e-a2c4-12a26bc42ac5",
        "type": "startNode",
        "position": {
          "x": 30,
          "y": 40
        },
        "agamaData": {
          "isTopLevelFlow": true,
          "basepath": "",
          "configParams": "{}",
          "nodeIcon": "material-symbols:line-start-square",
          "timeout": "",
          "inputs": "",
          "configs": "",
          "flowname": "co.acme.password1",
          "displayName": "Password Authentication",
          "creationDate": "24/12/2024",
          "hasComment": true,
          "comment": ""
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      }
    },
    {
      "id": "callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498",
      "type": "callNode",
      "position": {
        "x": 280,
        "y": 30
      },
      "data": {
        "id": "callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498",
        "type": "callNode",
        "position": {
          "x": 280,
          "y": 30
        },
        "previousNodeId": "startNode-171106c7-e30e-405e-a2c4-12a26bc42ac5",
        "agamaData": {
          "javaClassName": "io.jans.as.server.service.AuthenticationService",
          "javaMethodName": "class",
          "javaVariableName": "",
          "exceptionVariableField": "",
          "callType": "Call static method",
          "arguments": [],
          "nodeIcon": "material-symbols:code",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "New Authentication Service ",
          "hasComment": true,
          "comment": "create new authentication service instance ",
          "asssignedVariableName": "authService",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false
    },
    {
      "id": "callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458",
      "type": "callNode",
      "position": {
        "x": 530,
        "y": 30
      },
      "data": {
        "id": "callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458",
        "type": "callNode",
        "position": {
          "x": 530,
          "y": 30
        },
        "previousNodeId": "callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498",
        "agamaData": {
          "javaClassName": "io.jans.service.cdi.uti.Cdiutil",
          "javaMethodName": "bean",
          "javaVariableName": "",
          "exceptionVariableField": "",
          "callType": "Call static method",
          "arguments": [
            "authService"
          ],
          "nodeIcon": "material-symbols:code",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "New CdiUtil Object",
          "hasComment": true,
          "comment": "create new cdiUtil object",
          "asssignedVariableName": "cdiUtil",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false
    },
    {
      "id": "assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57",
      "type": "assignmentNode",
      "position": {
        "x": 780,
        "y": 30
      },
      "data": {
        "id": "assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57",
        "type": "assignmentNode",
        "position": {
          "x": 780,
          "y": 30
        },
        "previousNodeId": "callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458",
        "agamaData": {
          "assignments": [
            {
              "variableTypeCheck": true,
              "assignmentExpression": "{}",
              "assignedVariableName": "authResult"
            }
          ],
          "nodeIcon": "material-symbols:equal",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "Result object",
          "hasComment": true,
          "comment": "empty result object",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false
    },
    {
      "id": "repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413",
      "type": "repeatNode",
      "position": {
        "x": 1030,
        "y": 30
      },
      "data": {
        "id": "repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413",
        "type": "repeatNode",
        "position": {
          "x": 1030,
          "y": 30
        },
        "previousNodeId": "assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57",
        "agamaData": {
          "nodeIcon": "material-symbols:event-repeat-outline-rounded",
          "maxIteration": "3",
          "maxIterationVariableName": "",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "Retry Authentication ",
          "hasComment": true,
          "comment": "Retry 3 times to get correct  username and password ",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false
    },
    {
      "id": "rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e",
      "type": "rrfNode",
      "position": {
        "x": 893,
        "y": 263
      },
      "data": {
        "id": "rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e",
        "type": "rrfNode",
        "position": {
          "x": 1280,
          "y": 280
        },
        "previousNodeId": "repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413",
        "branching": "repeat",
        "agamaData": {
          "assignments": [],
          "nodeIcon": "ph:globe-simple",
          "templatePath": "login.ftlh",
          "asssignedVariableName": "creds",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "Login",
          "hasComment": true,
          "comment": "loads the login page for username and password input.",
          "arguments": "authResult",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3",
      "type": "callNode",
      "position": {
        "x": 1143,
        "y": 263
      },
      "data": {
        "id": "callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3",
        "type": "callNode",
        "position": {
          "x": 1143,
          "y": 263
        },
        "previousNodeId": "rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e",
        "agamaData": {
          "javaClassName": "cdiUtil",
          "javaMethodName": "authenticate",
          "javaVariableName": "",
          "exceptionVariableField": "",
          "callType": "Call static method",
          "arguments": [
            "creds.username",
            "creds.pssword"
          ],
          "nodeIcon": "material-symbols:code",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "Validate Credentials",
          "hasComment": true,
          "comment": "valid username and password ",
          "asssignedVariableName": "authResult.success",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false
    },
    {
      "id": "assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f",
      "type": "assignmentNode",
      "position": {
        "x": 1393,
        "y": 263
      },
      "data": {
        "id": "assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f",
        "type": "assignmentNode",
        "position": {
          "x": 1393,
          "y": 263
        },
        "previousNodeId": "callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3",
        "agamaData": {
          "assignments": [
            {
              "variableTypeCheck": true,
              "assignmentExpression": "authresult.uid",
              "assignedVariableName": "creds.username"
            }
          ],
          "nodeIcon": "material-symbols:equal",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "keep the Username ",
          "hasComment": true,
          "comment": "keep the username in case user need to retry authentication ",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": false
    },
    {
      "id": "whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350",
      "type": "whenNode",
      "position": {
        "x": 1081,
        "y": 541
      },
      "data": {
        "id": "whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350",
        "type": "whenNode",
        "position": {
          "x": 1643,
          "y": 263
        },
        "previousNodeId": "assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f",
        "agamaData": {
          "variableField": "",
          "valueField": "",
          "conditionInputField": "",
          "conditions": [
            {
              "variable": "authResult.success",
              "operator": "is",
              "dataValue": "true",
              "combinator": "none"
            }
          ],
          "nodeIcon": "ph:swap",
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "",
          "hasComment": true,
          "comment": "check if the authentication was successful",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 110,
        "height": 60
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "finishNode-ab6510c6-bf88-4c8c-aaa6-448e45b0dff6",
      "type": "finishNode",
      "position": {
        "x": 1110.8464173189757,
        "y": 741
      },
      "data": {
        "id": "finishNode-ab6510c6-bf88-4c8c-aaa6-448e45b0dff6",
        "type": "finishNode",
        "position": {
          "x": 1331,
          "y": 741
        },
        "previousNodeId": "whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350",
        "branching": "success",
        "agamaData": {
          "nodeColor": "",
          "titleColor": "",
          "descColor": "",
          "displayName": "",
          "hasComment": true,
          "comment": "",
          "flowfilename": "",
          "returnVariable": "{ userId: \"as9233Qz\", property1: \"value1\"}",
          "finishMode": "withSuccess",
          "nodeIcon": "material-symbols:line-end-square-rounded",
          "flowname": "co.acme.password1"
        }
      },
      "measured": {
        "width": 170,
        "height": 122
      },
      "selected": true,
      "dragging": false
    }
  ],
  "edges": [
    {
      "id": "startNode-171106c7-e30e-405e-a2c4-12a26bc42ac5-callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498",
      "type": "default",
      "source": "startNode-171106c7-e30e-405e-a2c4-12a26bc42ac5",
      "target": "callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_startNode-171106c7-e30e-405e-a2c4-12a26bc42ac5"
    },
    {
      "id": "callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498-callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458",
      "type": "default",
      "source": "callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498",
      "target": "callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_callNode-e8105708-560a-48c3-9e4d-be9d5a7b3498"
    },
    {
      "id": "callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458-assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57",
      "type": "default",
      "source": "callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458",
      "target": "assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_callNode-4cd95c20-75c4-448f-be3b-3c8cd218b458"
    },
    {
      "id": "assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57-repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413",
      "type": "default",
      "source": "assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57",
      "target": "repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_assignmentNode-70217958-24dc-42f7-b893-2a15453f8b57"
    },
    {
      "id": "repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413-rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e",
      "type": "default",
      "source": "repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413",
      "target": "rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "repeat",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_repeatNode-00c434c8-c76f-48b8-9dd8-562d897c2413_repeat"
    },
    {
      "id": "rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e-callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3",
      "type": "default",
      "source": "rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e",
      "target": "callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_rrfNode-aca39b4b-272c-4350-8508-c3bc6a87ca9e"
    },
    {
      "id": "callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3-assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f",
      "type": "default",
      "source": "callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3",
      "target": "assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_callNode-d2cf8e26-c670-4328-8e25-02cb71bb3ac3"
    },
    {
      "id": "assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f-whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350",
      "type": "default",
      "source": "assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f",
      "target": "whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_assignmentNode-d61a0479-51d9-46ae-9e50-4b46d0cd7e6f"
    },
    {
      "id": "whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350-finishNode-ab6510c6-bf88-4c8c-aaa6-448e45b0dff6",
      "type": "default",
      "source": "whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350",
      "target": "finishNode-ab6510c6-bf88-4c8c-aaa6-448e45b0dff6",
      "labelBgPadding": [
        8,
        4
      ],
      "labelBgBorderRadius": 4,
      "label": "Condition met",
      "labelBgStyle": {
        "fill": "#009688",
        "color": "#ffffff",
        "fillOpacity": 0.7
      },
      "labelShowBg": true,
      "sourceHandle": "source_whenNode-0eabf7a1-3ce3-4049-a1ff-1e747ffab350_success"
    }
  ],
  "viewport": {
    "x": 107.535224374118,
    "y": 70.1118045400743,
    "zoom": 0.6909564332172579
  }
}